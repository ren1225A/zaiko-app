{% extends "base.html" %}

{% block content %}
<h2>ğŸ—‘ï¸ ã‚´ãƒŸç®±ï¼ˆå‰Šé™¤æ¸ˆã¿å“ç›®ï¼‰</h2>

{% if items %}
<p class="trash-info">å‰Šé™¤ã—ãŸå“ç›®ã¯30æ—¥é–“ä¿ç®¡ã•ã‚Œã¾ã™ã€‚å¾©å…ƒã¾ãŸã¯å®Œå…¨å‰Šé™¤ã‚’é¸æŠã§ãã¾ã™ã€‚</p>

<div class="trash-list">
    {% for item in items %}
    <div class="trash-item">
        <div class="trash-header">
            <h3>{{ item.name }}</h3>
            <span class="deleted-date">å‰Šé™¤æ—¥: {{ item.updated_at }}</span>
        </div>
        
        <div class="trash-details">
            <p>æœ€çµ‚åœ¨åº«: {{ item.current_quantity }} {{ item.unit }}</p>
            <p>æœ€ä½åœ¨åº«æ•°: {{ item.min_threshold }} {{ item.unit }}</p>
            {% if item.supplier_name %}
            <p>ä»•å…¥å…ˆ: {{ item.supplier_name }}</p>
            {% endif %}
        </div>
        
        <div class="trash-actions">
    <form method="POST" action="{{ url_for('restore_item', item_id=item.item_id) }}" 
          style="display: inline;" 
          onsubmit="return confirm('ã€Œ{{ item.name }}ã€ã‚’å¾©å…ƒã—ã¾ã™ã‹ï¼Ÿ\nåœ¨åº«ä¸€è¦§ã«æˆ»ã‚Šã¾ã™ã€‚');">
        <button type="submit" class="btn btn-restore">å¾©å…ƒ</button>
    </form>
    
    <form method="POST" action="{{ url_for('permanent_delete', item_id=item.item_id) }}" 
          style="display: inline;" 
          onsubmit="return confirm('ã€Œ{{ item.name }}ã€ã‚’å®Œå…¨ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ\n\nã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚\nãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰å®Œå…¨ã«æ¶ˆå»ã•ã‚Œã¾ã™ã€‚');">
        <button type="submit" class="btn btn-permanent-delete">å®Œå…¨å‰Šé™¤</button>
    </form>
</div>
    </div>
    {% endfor %}
</div>
{% else %}
<p class="empty-message">ã‚´ãƒŸç®±ã¯ç©ºã§ã™ã€‚</p>
{% endif %}

<a href="{{ url_for('index') }}" class="btn btn-secondary">åœ¨åº«ä¸€è¦§ã«æˆ»ã‚‹</a>

{% endblock %}